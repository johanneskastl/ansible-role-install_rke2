#
# {{ ansible_managed }}
#

#
# listener
#
{% if bind_address is defined %}
bind-address: "{{ bind_address }}"
{% endif %}
{% if advertise_address is defined %}
advertise-address: "{{ advertise_address }}"
{% endif %}
{% if tls_san is defined %}
tls-san:
{% for line in tls_san %}
  - "{{ line }}"
{% endfor %}
{% endif %}
{% if tls_san_security is defined %}
tls-san-security: "{{ tls_san_security }}"
{% endif %}

#
# data
#
{% if data_dir is defined %}
data-dir: "{{ data_dir }}"
{% endif %}

#
# networking
#
{% if cluster_cidr is defined %}
cluster-cidr: "{{ cluster_cidr }}"
{% endif %}
{% if service_cidr is defined %}
service-cidr: "{{ service_cidr }}"
{% endif %}
{% if service_node_port_range is defined %}
service-node-port-range: "{{ service_node_port_range }}"
{% endif %}
{% if cluster_dns is defined %}
cluster-dns: "{{ cluster_dns }}"
{% endif %}
{% if cluster_domain is defined %}
cluster-domain: "{{ cluster_domain }}"
{% endif %}

#
# cluster
#
{% if token is defined %}
token: "{{ token }}"
{% endif %}
{% if token_file is defined %}
token-file: "{{ token_file }}"
{% endif %}

#
# client
#
{% if write_kubeconfig is defined %}
write-kubeconfig: "{{ write_kubeconfig }}"
{% endif %}
{% if write_kubeconfig_mode is defined %}
write-kubeconfig-mode: "{{ write_kubeconfig_mode }}"
{% endif %}

#
# flags
#
{% if kube_apiserver_arg is defined %}
kube-apiserver-arg: "{{ kube_apiserver_arg }}"
{% endif %}
{% if etcd_arg is defined %}
etcd-arg: "{{ etcd_arg }}"
{% endif %}
{% if kube_controller_manager_arg is defined %}
kube-controller-manager-arg: "{{ kube_controller_manager_arg }}"
{% endif %}
{% if kube_scheduler_arg is defined %}
kube-scheduler-arg: "{{ kube_scheduler_arg }}"
{% endif %}

#
# db
#
{% if cluster_reset_restore_path is defined %}
cluster-reset-restore-path: "{{ cluster_reset_restore_path }}"
{% endif %}
{% if etcd_expose_metrics is defined and etcd_expose_metrics | bool %}
etcd-expose-metrics: 'true'
{% endif %}
{% if etcd_disable_snapshots is defined and etcd_disable_snapshots | bool %}
etcd-disable-snapshots: 'true'
{% endif %}
{% if etcd_snapshot_name is defined %}
etcd-snapshot-name: "{{ etcd_snapshot_name }}"
{% endif %}
{% if etcd_snapshot_schedule_cron is defined %}
etcd-snapshot-schedule-cron: "{{ etcd_snapshot_schedule_cron }}"
{% endif %}
{% if etcd_snapshot_retention is defined %}
etcd-snapshot-retention: "{{ etcd_snapshot_retention }}"
{% endif %}
{% if etcd_snapshot_dir is defined %}
etcd-snapshot-dir: "{{ etcd_snapshot_dir }}"
{% endif %}
{% if etcd_s3 is defined and etcd_s3 | bool %}
etcd-s3: 'true'
{% endif %}
{% if etcd_s3_endpoint is defined %}
etcd-s3-endpoint: "{{ etcd_s3_endpoint }}"
{% endif %}
{% if etcd_s3_endpoint_ca is defined %}
etcd-s3-endpoint-ca: "{{ etcd_s3_endpoint_ca }}"
{% endif %}
{% if etcd_s3_skip_ssl_verify is defined and etcd_s3_skip_ssl_verify | bool %}
etcd-s3-skip-ssl-verify: 'true'
{% endif %}
{% if etcd_s3_access_key is defined %}
etcd-s3-access-key: "{{ etcd_s3_access_key }}"
{% endif %}
{% if etcd_s3_secret_key is defined %}
etcd-s3-secret-key: "{{ etcd_s3_secret_key }}"
{% endif %}
{% if etcd_s3_bucket is defined %}
etcd-s3-bucket: "{{ etcd_s3_bucket }}"
{% endif %}
{% if etcd_s3_region is defined %}
etcd-s3-region: "{{ etcd_s3_region }}"
{% endif %}
{% if etcd_s3_folder is defined %}
etcd-s3-folder: "{{ etcd_s3_folder }}"
{% endif %}

#
# components
#
{% if disable_something is defined %}
disable: "{{ disable_something }}"
{% endif %}
{% if disable_scheduler is defined and disable_scheduler | bool %}
disable-scheduler: 'true'
{% endif %}
{% if disable_cloud_controller is defined and disable_cloud_controller | bool %}
disable-cloud-controller: 'true'
{% endif %}
{% if disable_kube_proxy is defined and disable_kube_proxy | bool %}
disable-kube-proxy: 'true'
{% endif %}
{% if control_plane_resource_requests is defined %}
control-plane-resource-requests: "{{ control_plane_resource_requests }}"
{% endif %}
{% if control_plane_resource_limits is defined %}
control-plane-resource-limits: "{{ control_plane_resource_limits }}"
{% endif %}
{% if kube_apiserver_extra_mount is defined %}
kube-apiserver-extra-mount: "{{ kube_apiserver_extra_mount }}"
{% endif %}
{% if kube_scheduler_extra_mount is defined %}
kube-scheduler-extra-mount: "{{ kube_scheduler_extra_mount }}"
{% endif %}
{% if kube_controller_manager_extra_mount is defined %}
kube-controller-manager-extra-mount: "{{ kube_controller_manager_extra_mount }}"
{% endif %}
{% if kube_proxy_extra_mount is defined %}
kube-proxy-extra-mount: "{{ kube_proxy_extra_mount }}"
{% endif %}
{% if etcd_extra_mount is defined %}
etcd-extra-mount: "{{ etcd_extra_mount }}"
{% endif %}
{% if cloud_controller_manager_extra_mount is defined %}
cloud-controller-manager-extra-mount: "{{ cloud_controller_manager_extra_mount }}"
{% endif %}
{% if kube_apiserver_extra_env is defined %}
kube-apiserver-extra-env: "{{ kube_apiserver_extra_env }}"
{% endif %}
{% if kube_scheduler_extra_env is defined %}
kube-scheduler-extra-env: "{{ kube_scheduler_extra_env }}"
{% endif %}
{% if kube_controller_manager_extra_env is defined %}
kube-controller-manager-extra-env: "{{ kube_controller_manager_extra_env }}"
{% endif %}
{% if kube_proxy_extra_env is defined %}
kube-proxy-extra-env: "{{ kube_proxy_extra_env }}"
{% endif %}
{% if etcd_extra_env is defined %}
etcd-extra-env: "{{ etcd_extra_env }}"
{% endif %}
{% if cloud_controller_manager_extra_env is defined %}
cloud-controller-manager-extra-env: "{{ cloud_controller_manager_extra_env }}"
{% endif %}

#
# agent/node
#
{% if node_name is defined %}
node-name: "{{ node_name }}"
{% endif %}
{% if node_label is defined %}
node-label:
{% for line in node_label %}
  - "{{ line }}"
{% endfor %}
{% endif %}
{% if node_taint is defined %}
node-taint:
{% for line in node_taint %}
  - "{{ line }}"
{% endfor %}
{% endif %}
{% if image_credential_provider_bin_dir is defined %}
image-credential-provider-bin-dir: "{{ image_credential_provider_bin_dir }}"
{% endif %}
{% if image_credential_provider_config is defined %}
image-credential-provider-config: "{{ image_credential_provider_config }}"
{% endif %}

#
# agent/runtime
#
{% if container_runtime_endpoint is defined %}
container-runtime-endpoint: "{{ container_runtime_endpoint }}"
{% endif %}
{% if snapshotter is defined %}
snapshotter: "{{ snapshotter }}"
{% endif %}
{% if private_registry is defined %}
private-registry: "{{ private_registry }}"
{% endif %}

#
# agent/networking
#
{% if node_ip is defined %}
node-ip: "{{ node_ip }}"
{% endif %}
{% if node_external_ip is defined %}
node-external-ip: "{{ node_external_ip }}"
{% endif %}
{% if resolv_conf is defined %}
resolv-conf: "{{ resolv_conf }}"
{% endif %}

#
# agent/flags
#
{% if kubelet_arg is defined %}
kubelet-arg:
{% for line in kubelet_arg %}
  - "{{ line }}"
{% endfor %}
{% endif %}
{% if kube_proxy_arg is defined %}
kube-proxy-arg: "{{ kube_proxy_arg }}"
{% endif %}

#
# agent/node
#
{% if protect_kernel_defaults is defined and protect_kernel_defaults | bool %}
protect-kernel-defaults: 'true'
{% endif %}
{% if selinux is defined and selinux | bool %}
selinux: 'true'
{% endif %}
{% if lb_server_port is defined and lb_server_port | bool %}
lb-server-port: "{{ lb_server_port }}"
{% endif %}

#
# image
#
{% if system_default_registry is defined %}
system-default-registry: "{{ system_default_registry }}"
{% endif %}
{% if kube_apiserver_image is defined %}
kube-apiserver-image: "{{ kube_apiserver_image }}"
{% endif %}
{% if kube_controller_manager_image is defined %}
kube-controller-manager-image: "{{ kube_controller_manager_image }}"
{% endif %}
{% if kube_proxy_image is defined %}
kube-proxy-image: "{{ kube_proxy_image }}"
{% endif %}
{% if kube_scheduler_image is defined %}
kube-scheduler-image: "{{ kube_scheduler_image }}"
{% endif %}
{% if pause_image is defined %}
pause-image: "{{ pause_image }}"
{% endif %}
{% if runtime_image is defined %}
runtime-image: "{{ runtime_image }}"
{% endif %}
{% if etcd_image is defined %}
etcd-image: "{{ etcd_image }}"
{% endif %}

#
# cloud provider
#
{% if cloud_provider_name is defined %}
cloud-provider-name: "{{ cloud_provider_name }}"
{% endif %}
{% if cloud_provider_config is defined %}
cloud-provider-config: "{{ cloud_provider_config }}"
{% endif %}

#
# security
#
{% if profile is defined %}
profile: "{{ profile }}"
{% endif %}
{% if audit_policy_file is defined %}
audit-policy-file: "{{ audit_policy_file }}"
{% endif %}

#
# experimental
#

#
# experimental/agent
#
{% if kubelet_path is defined %}
kubelet-path: "{{ kubelet_path }}"
{% endif %}

#
# experimental/cluster
#
{% if agent_token is defined %}
agent-token: "{{ agent_token }}"
{% endif %}
{% if agent_token_file is defined %}
agent-token-file: "{{ agent_token_file }}"
{% endif %}
{% if server_url is defined %}
server: "{{ server_url }}"
{% endif %}
{% if cluster_reset is defined and cluster_reset | bool %}
cluster-reset: 'true'
{% endif %}
